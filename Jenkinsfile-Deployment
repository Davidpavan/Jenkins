pipeline {
    agent {
        label 'Ansible'
        }

        parameters {
           choice(name: 'Env', choices: ['dev', 'prod'], description: 'Select Environment')
           }

           stages {
               stage('find the server'){
                    steps{
                         echo
                    }
               }

               stage('Deploy to DEV Env'){
                  when {
                     environment name: 'Env', value: 'dev'
                  }
                  steps{
                      sh ' ansible-playbook ..... '
                  }
               }

               stage('Deploy to DEV Env'){
                    when {
                      environment name: 'Env', value: 'dev'
                    }
                    steps{
                       sh ' ansible-playbook ..... '
                    }
               }