pipeline {
    agent {
        label 'Ansible'
        }

        parameters {
           choice(name: 'Env', choices: ['dev', 'prod'], description: 'Select Environment')
           string(name: 'COMPONENT', defaultValue: '', description: 'which component to deploy')
           string(name: 'VERSION', defaultValue: '', description: 'which version to deploy')
           }

           stages {
               stage('find the server'){
                    steps{
                         sh 'echo'
                    }
               }

               stage('Deploy to DEV Env'){
                  when {
                     environment name: 'Env', value: 'dev'
                  }
                  steps{
                      sh 'echo ansible-playbook .....'
                  }
               }

               stage('Deploy to PROD Env'){
                    when {
                      environment name: 'Env', value: 'prod'
                    }
                    steps{
                       sh 'echo ansible-playbook .....'
                    }
               }
           }
}